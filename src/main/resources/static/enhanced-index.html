<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Downloader Pro</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Sticky Navigation -->
    <nav class="navbar" id="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <i class="fas fa-play-circle"></i>
                <span>YT Downloader Pro</span>
            </div>
            <div class="nav-menu">
                <a href="#home" class="nav-item active">
                    <i class="fas fa-home"></i>
                    <span>Home</span>
                </a>
                <a href="#playlists" class="nav-item">
                    <i class="fas fa-list-ul"></i>
                    <span>Playlists</span>
                </a>
                <a href="#subtitles" class="nav-item">
                    <i class="fas fa-closed-captioning"></i>
                    <span>Subtitles</span>
                </a>
                <a href="#settings" class="nav-item">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </a>
            </div>
            <!-- Menu Toggle Button -->
            <button class="menu-toggle" id="menuToggle">
                <i class="fas fa-chevron-up"></i>
            </button>
        </div>
    </nav>

    <div class="main-layout">
        <!-- Enhanced Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-section">
                <h3><i class="fas fa-download"></i> Quick Actions</h3>
                <button class="sidebar-btn" onclick="clearAll()">
                    <i class="fas fa-trash"></i> Clear All
                </button>
                <button class="sidebar-btn" onclick="openSettings()">
                    <i class="fas fa-cog"></i> Settings
                </button>
                <button class="sidebar-btn" onclick="toggleTheme()">
                    <i class="fas fa-moon"></i> Dark Mode
                </button>
            </div>

            <div class="sidebar-section">
                <h3><i class="fas fa-info-circle"></i> Stats</h3>
                <div class="stat-card">
                    <span class="stat-number" id="downloadCount">0</span>
                    <span class="stat-label">Downloads</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="totalSize">0 MB</span>
                    <span class="stat-label">Total Size</span>
                </div>
            </div>

            <!-- Download History -->
            <div class="sidebar-section">
                <h3><i class="fas fa-history"></i> Recent</h3>
                <div class="recent-downloads" id="recentDownloads">
                    <p class="empty-state">No recent downloads</p>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- URL Input Section -->
            <section class="input-section">
                <div class="input-card">
                    <h2><i class="fas fa-link"></i> Enter YouTube URL</h2>
                    <div class="input-group">
                        <div class="input-wrapper">
                            <textarea id="urlInput" placeholder="Paste YouTube URL here..." rows="3"></textarea>
                            <div class="input-actions">
                                <button class="btn-secondary" onclick="pasteFromClipboard()">
                                    <i class="fas fa-paste"></i> Paste
                                </button>
                                <button class="btn-secondary" onclick="clearInput()">
                                    <i class="fas fa-times"></i> Clear
                                </button>
                            </div>
                        </div>
                        <button class="btn-primary" onclick="analyzeVideo()">
                            <i class="fas fa-search"></i> Analyze
                        </button>
                    </div>
                    <div class="url-types">
                        <span class="url-type">
                            <i class="fas fa-video"></i> Single Video
                        </span>
                        <span class="url-type">
                            <i class="fas fa-list"></i> Playlist
                        </span>
                        <span class="url-type">
                            <i class="fas fa-closed-captioning"></i> Subtitles
                        </span>
                    </div>
                </div>
            </section>

            <!-- Progress Section -->
            <section class="progress-section hidden" id="progressSection">
                <div class="progress-card">
                    <h3>Download Progress</h3>
                    <div class="progress-container">
                        <div class="progress-bar" id="progressBar">
                            <div class="progress-fill" id="progressFill"></div>
                            <span class="progress-text" id="progressText">0%</span>
                        </div>
                        <div class="progress-details">
                            <span class="progress-status" id="progressStatus">Ready</span>
                            <span class="progress-speed" id="progressSpeed"></span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Video Information -->
            <section class="video-section hidden" id="videoSection">
                <div id="videoInfo"></div>
            </section>

            <!-- Enhanced Download Options -->
            <section class="options-section hidden" id="optionsSection">
                <div class="option-tabs">
                    <button class="tab-btn active" data-tab="video">
                        <i class="fas fa-video"></i> Video
                    </button>
                    <button class="tab-btn" data-tab="audio">
                        <i class="fas fa-music"></i> Audio
                    </button>
                    <button class="tab-btn" data-tab="subtitles">
                        <i class="fas fa-closed-captioning"></i> Subtitles
                    </button>
                    <button class="tab-btn" data-tab="advanced">
                        <i class="fas fa-cogs"></i> Advanced
                    </button>
                </div>

                <!-- Video Tab -->
                <div class="tab-content active" id="video-tab">
                    <div class="quality-grid" id="qualityGrid">
                        <!-- Quality options will be inserted here -->
                    </div>
                    <div class="download-options">
                        <div class="option-row">
                            <label for="downloadPath">Download Location:</label>
                            <div class="path-selector">
                                <input type="text" id="downloadPath" placeholder="Downloads/YouTubeDownloader">
                                <button class="btn-secondary" onclick="selectPath()">
                                    <i class="fas fa-folder-open"></i> Browse
                                </button>
                            </div>
                        </div>
                        <div class="option-row">
                            <label>
                                <input type="checkbox" id="renameFile"> 
                                Rename file before download
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Audio Tab -->
                <div class="tab-content" id="audio-tab">
                    <div class="audio-formats">
                        <div class="format-option" data-format="mp3">
                            <i class="fas fa-music"></i>
                            <div class="format-details">
                                <span class="format-name">MP3</span>
                                <span class="format-desc">320kbps - Best compatibility</span>
                            </div>
                        </div>
                        <div class="format-option" data-format="m4a">
                            <i class="fas fa-file-audio"></i>
                            <div class="format-details">
                                <span class="format-name">M4A</span>
                                <span class="format-desc">AAC - Best quality</span>
                            </div>
                        </div>
                        <div class="format-option" data-format="wav">
                            <i class="fas fa-wave-square"></i>
                            <div class="format-details">
                                <span class="format-name">WAV</span>
                                <span class="format-desc">Uncompressed - Largest size</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Subtitles Tab -->
                <div class="tab-content" id="subtitles-tab">
                    <div class="subtitle-options" id="subtitleOptions">
                        <div class="subtitle-formats">
                            <h4>Format Options:</h4>
                            <div class="format-toggles">
                                <label><input type="checkbox" checked> SRT</label>
                                <label><input type="checkbox"> VTT</label>
                                <label><input type="checkbox"> TXT</label>
                            </div>
                        </div>
                        <div class="subtitle-languages" id="subtitleLanguages">
                            <!-- Languages will be populated here -->
                        </div>
                    </div>
                </div>

                <!-- Advanced Tab -->
                <div class="tab-content" id="advanced-tab">
                    <div class="advanced-options">
                        <div class="option-group">
                            <h4>Download Settings</h4>
                            <label>
                                <input type="checkbox" id="embedMetadata" checked> 
                                Embed video metadata
                            </label>
                            <label>
                                <input type="checkbox" id="embedThumbnail"> 
                                Embed thumbnail
                            </label>
                            <label>
                                <input type="checkbox" id="keepOriginal"> 
                                Keep original video after conversion
                            </label>
                        </div>
                        <div class="option-group">
                            <h4>Network Settings</h4>
                            <div class="option-row">
                                <label for="maxRetries">Max retries:</label>
                                <select id="maxRetries">
                                    <option value="3">3</option>
                                    <option value="5" selected>5</option>
                                    <option value="10">10</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Download Action Buttons -->
                <div class="action-buttons">
                    <button class="btn-primary btn-large" id="downloadBtn" onclick="startDownload()" disabled>
                        <i class="fas fa-download"></i> Download
                    </button>
                    <button class="btn-secondary" onclick="previewDownload()">
                        <i class="fas fa-eye"></i> Preview
                    </button>
                </div>
            </section>

            <!-- Loading Overlay -->
            <div class="loading-overlay hidden" id="loadingOverlay">
                <div class="loading-content">
                    <div class="loading-spinner"></div>
                    <p id="loadingText">Analyzing video...</p>
                    <div class="loading-progress">
                        <div class="loading-bar" id="loadingBar"></div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Enhanced Footer Info -->
    <div class="footer-info">
        <div class="footer-content">
            <div class="browser-info">
                <i class="fab fa-chrome"></i>
                <span id="detectedBrowser">Chrome Detected</span>
            </div>
            <div class="download-path">
                <i class="fas fa-folder"></i>
                <span id="currentPath">Downloads/YTDownloader</span>
            </div>
            <div class="status-indicator">
                <div class="status-dot ready" id="statusDot"></div>
                <span id="statusText">Ready</span>
            </div>
        </div>
    </div>

    <!-- Modal for Settings -->
    <div class="modal-overlay hidden" id="modalOverlay">
        <div class="modal" id="settingsModal">
            <div class="modal-header">
                <h3>Settings</h3>
                <button class="modal-close" onclick="closeModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-content">
                <div class="setting-group">
                    <label>Default Download Quality:</label>
                    <select id="defaultQuality">
                        <option value="best">Best Available</option>
                        <option value="1080p">1080p</option>
                        <option value="720p" selected>720p</option>
                        <option value="480p">480p</option>
                    </select>
                </div>
                <div class="setting-group">
                    <label>Default Download Location:</label>
                    <input type="text" id="defaultPath" placeholder="Downloads/YouTubeDownloader">
                </div>
                <div class="setting-group">
                    <label>
                        <input type="checkbox" id="autoDetectBrowser" checked>
                        Auto-detect browser for authentication
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="resetSettings()">Reset</button>
                <button class="btn-primary" onclick="saveSettings()">Save Changes</button>
            </div>
        </div>
    </div>

    <!-- Toast Notifications Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Scripts in the new organized structure -->
    <script src="js/api.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/events.js"></script>
    <script src="js/app.js"></script>
</body>
</html>